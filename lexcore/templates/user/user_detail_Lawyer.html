{% extends 'layout/base.html' %}
{% load static %}
{% block title %}
Client Details
{% endblock title %}
{% block content %}
<div class="d-flex">
    {% include 'layout/sidebar.html' %}
    <div class="w-100">
        {% include 'layout/header.html' %}
        <div class="my-3 mx-3">
            <div class="card-header text-center text-white bg-primary">
                <b>File Records related to {{ user.userid.username }} </b>
            </div>

            <!-- Nav pills -->
            <ul class="nav nav-tabs">
                <li class="nav-item">
                    <a class="nav-link active" data-bs-toggle="tab" href="#detail">Profile</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" data-bs-toggle="tab" href="#matters">Matters</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" data-bs-toggle="tab" href="#Activity">Activities</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" data-bs-toggle="tab" href="#Duedates">Due Dates</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" data-bs-toggle="tab" href="#photoimage">Photo Image</a>
                </li>
            </ul>
            <!-- Tab panes -->
            <div class="tab-content">
                <div class="tab-pane container active" id="detail">
                    <div class="row">
                        <div class="col-lg-6">
                            <div class="card mt-2">
                                <div class="card-header mb-1"
                                    style=" color: black; background-color:rgb(228, 248, 188);"><a
                                        class="btn btn-secondary btn-sm mt-1" href="{% url 'edit-user' user.id %}"
                                        title="Modify"><i class="fas fa-edit"></i></a>
                                    Lawyer Details
                                </div>

                                <div class="input-group input-group-sm mb-1 mt-1">
                                    <span class="input-group-text" style="width: 113px;">User Name</span>
                                    <input type="text" name="username" value="{{user.userid.username}}"
                                        class="form-control" readonly>
                                </div>
                                <div class="input-group input-group-sm mb-1 mt-1">
                                    <span class="input-group-text" style="width: 113px;"> Name </span>
                                    <input type="text" name="folder" value="{{user.name}}" class="form-control"
                                        readonly>
                                </div>
                                <div class="input-group input-group-sm mb-1 mt-1">
                                    <span class="input-group-text" style="width: 113px;"> Address </span>
                                    <input type="text" name="folder" value="{{ user.address }}" class="form-control"
                                        readonly>
                                </div>
                                <div class="input-group input-group-sm mb-1 mt-1">
                                    <span class="input-group-text" style="width: 113px;"> Rank </span>
                                    <input type="text" name="rank" value="{{ user.rank }}" class="form-control"
                                        readonly>
                                </div>
                                <div class="input-group input-group-sm mb-1 mt-1">
                                    <span class="input-group-text" style="width: 113px;"> Access Code </span>
                                    <input type="text" name="folder" value="{{ user.access_code }}" class="form-control"
                                        readonly>
                                </div>
                                <div class="input-group input-group-sm mb-1 mt-1">
                                    <span class="input-group-text" style="width: 113px;"> Mobile </span>
                                    <input type="text" name="folder" value="{{ user.mobile }}" class="form-control"
                                        readonly>
                                </div>
                                <div class="input-group input-group-sm mb-1 mt-1">
                                    <span class="input-group-text" style="width: 113px;"> Date Acquired </span>
                                    <input type="text" name="folder" value="{{ user.date_acquired}}"
                                        class="form-control" readonly>
                                </div>
                                <div class="input-group input-group-sm mb-1 mt-1">
                                    <span class="input-group-text" style="width: 113px;"> Remarks </span>
                                    <input type="text" name="folder" value="{{ user.remarks}}" class="form-control"
                                        readonly>
                                </div>

                            </div>
                        </div>
                        <div class="col-lg-6">
                            <div class="card mt-2">
                                <div class="card-header mb-1"
                                    style=" color: black; background-color:rgb(228, 248, 188);">
                                    <a class="btn btn-secondary btn-sm mt-1" href="{% url 'add-lawyer' user.id %}"
                                        title="add Lawyer Info"><i class="fas fa-plus"></i></a>
                                    <a class="btn btn-secondary btn-sm mt-1" href="{% url 'edit-lawyer' user.id %}"
                                        title="Modify Lawyer Info"><i class="fas fa-edit"></i></a>
                                    Lawyer Other Details
                                </div>
                                <div class="input-group input-group-sm mb-1 mt-1">
                                    <span class="input-group-text" style="width: 113px;"> Lawyer Name </span>
                                    <input type="text" name="folder" value="{{ lawyer.lawyer_name}}"
                                        class="form-control" readonly>
                                </div>
                                <div class="input-group input-group-sm mb-1 mt-1">
                                    <span class="input-group-text" style="width: 113px;"> Phone </span>
                                    <input type="text" name="folder" value="{{ lawyer.phone}}" class="form-control"
                                        readonly>
                                </div>
                                <div class="input-group input-group-sm mb-1 mt-1">
                                    <span class="input-group-text" style="width: 113px;"> IBP Roll# </span>
                                    <input type="text" name="folder" value="{{ lawyer.IBPRollNo}}" class="form-control"
                                        readonly>
                                </div>
                                <div class="input-group input-group-sm mb-1 mt-1">
                                    <span class="input-group-text" style="width: 113px;"> IBP Chapter </span>
                                    <input type="text" name="folder" value="{{ lawyer.IBPChapter}}" class="form-control"
                                        readonly>
                                </div>
                                <div class="input-group input-group-sm mb-1 mt-1">
                                    <span class="input-group-text" style="width: 113px;"> IBP Lifetime # </span>
                                    <input type="text" name="folder" value="{{ lawyer.IBPLifetimeNo}}"
                                        class="form-control" readonly>
                                </div>
                                <div class="input-group input-group-sm mb-1 mt-1">
                                    <span class="input-group-text" style="width: 113px;"> Specialization </span>
                                    <input type="text" name="folder" value="{{ lawyer.Specialization}}"
                                        class="form-control" readonly>
                                </div>
                                <div class="input-group input-group-sm mb-1 mt-1">
                                    <span class="input-group-text" style="width: 113px;"> Date Hired </span>
                                    <input type="text" name="folder" value="{{ lawyer.date_hired}}" class="form-control"
                                        readonly>
                                </div>
                                <div class="input-group input-group-sm mb-1 mt-1">
                                    <span class="input-group-text" style="width: 113px;"> Remarks </span>
                                    <input type="text" name="folder" value="{{ lawyer.remarks}}" class="form-control"
                                        readonly>
                                </div>

                            </div>

                        </div>
                    </div>
                </div>

                <div class="tab-pane container fade mb-1" id="matters">
                    <table class="table-hover table-bordered table-sm small table" id="matterlist">
                        <thead class="table-primary text-center">
                            <tr>
                                <th scope="col" style="width:3%;">#</th>
                                <th scope="col" style="width:5%;">Lawyer</th>
                                <th scope="col" style="width:5%;">Filing Date</th>
                                <th scope="col" style="width:22%;">Folder</th>
                                <th scope="col" style="width:10%;">Status</th>
                                <th scope="col" style="width:25%;">Matter Title</th>
                                <th scope="col" style="width:15%;">Matter No.</th>
                                <th scope="col" style="width:10%;">Client Ref</th>
                                <th scope="col" style="width:5%;">Select</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for matter in matters %}
                            <tr>
                                <td>{{ forloop.counter }}</td>
                                <td class="text-center">{{ matter.handling_lawyer.access_code }}</td>
                                <td>{{ matter.filing_date | date:'m/d/Y' }}</td>
                                <td>{{ matter.folder }}</td>
                                <td>{{ matter.status }}</td>
                                <td>{{ matter.matter_title }}</td>
                                <td>{{ matter.matterno }}</td>
                                <td>{{ matter.clientrefno }}</td>
                                <td style="text-align: center;"><a class="btn btn-secondary btn-sm"
                                        href="{% url 'select-matter' matter.id %}" title="Select Matter"><i
                                            class="far fa-hand-pointer"></i></a>
                                </td>

                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
                <div class="tab-pane container fade" id="folders">
                    <a class="btn btn-secondary btn-sm mt-1" data-bs-toggle="modal" data-bs-target="#addfolderModal"
                        title="New Client Folder"><i class="fas fa-plus"></i></a>
                    <table class="table-hover table-bordered table-sm small table mt-1">
                        <thead class="table-primary text-center">
                            <tr>
                                <th scope="col" style="width:3%;">#</th>
                                <th scope="col" style="width:15%;">Folder/Areas</th>
                                <th scope="col" style="width:30%;">Folder Description</th>
                                <th scope="col" style="width:15%;">Supervising Lawyer</th>
                                <th scope="col" style="width:15%;">Remarks</th>
                                <th scope="col" style="width:5%;">Action</th>

                            </tr>
                        </thead>
                        <tbody>
                            {% for folder in folders %}
                            <tr>
                                <td>{{ forloop.counter }}</td>
                                <td>{{ folder.folder_type }}</td>
                                <td>{{ folder.folder_description }}</td>
                                <td>{{ folder.Supervisinglawyer }}</td>
                                <td>{{ folder.remarks }}</td>
                                <!-- <td style="text-align: center;"><a class="btn btn-secondary btn-sm"
                                        href="{% url 'newfolder-matter' folder.id client.id %}"
                                        title="New folder matter"><i class="fas fa-plus"></i></a>
                                </td> -->
                                <td style="text-align: center;"><a class="btn btn-secondary btn-sm"
                                        href="{% url 'list-foldermatters' folder.id %}" title="View folder matters"><i
                                            class="far fa-hand-pointer"></i></a>
                                </td>

                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>

                    <table class="table-hover table-bordered table-sm small table mt-1">
                        <thead class="table-primary text-center">
                            <tr>
                                <th scope="col" style="width:3%;">#</th>
                                <th scope="col" style="width:77%;">Folder/Practice Areas</th>
                                <th scope="col" style="width:15%;">No. Of Matters</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for folder in folder_result %}
                            <tr>
                                <td>{{ forloop.counter }}</td>
                                <td>{{ folder.folder__folder_type__folder }}</td>
                                <td style="text-align: center;"><a
                                        href="{% url 'folder-matters' folder.folder__folder_type__id client.id %}">
                                        {{folder.NoOfMatters }}</a></td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
                <div class="tab-pane container fade" id="contacts">
                    <a class="btn btn-secondary btn-sm mt-1" data-bs-toggle="modal" data-bs-target="#addcontactModal"
                        title="New Contact"><i class="fas fa-plus"></i></a>


                    <table class="table-hover table-bordered table-sm small table mt-1">
                        <thead class="table-primary text-center">
                            <tr>
                                <th scope="col" style="width:3%;">#</th>
                                <th scope="col" style="width:22%;">Contact Persons</th>
                                <th scope="col" style="width:15%;">Position</th>
                                <th scope="col" style="width:40%;">Address</th>
                                <th scope="col" style="width:15%;">Phone</th>
                                <th colspan="2" style="width:5%;">Action</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for contact in contacts %}
                            <tr>
                                <td>{{ forloop.counter }}</td>
                                <td><a
                                        href="{% url 'viewclientdetails-contact' contact.id client.id contact.contact_person %}">
                                        {{contact.contact_person }}</a></td>
                                <td>{{ contact.position }}</td>
                                <td>{{ contact.address }}</td>
                                <td>{{ contact.phone }}</td>

                                <td><a class="btn btn-secondary btn-sm"
                                        href="{% url 'edit-contact' contact.id client.id %}" title="Modify"><i
                                            class="fas fa-edit"></i></a>
                                </td>
                                <td><a class="btn btn-secondary btn-sm"
                                        href="{% url 'remove-contact' contact.id client.id %}" title="New Matter"><i
                                            class="fas fa-trash-alt"></i></a>
                                </td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
                <div class="tab-pane container fade" id="Activity">
                    <table class="table-hover table-bordered table-sm small table mt-1" id="clientactivitylist">
                        <thead class="table-primary text-center">
                            <tr>
                                <th scope="col" style="width:3%;">#</th>
                                <th scope="col" style="width:10%;">Activity Date</th>
                                <th scope="col" style="width:5%;">Type</th>
                                <th scope="col" style="width:5%;">Lawyer</th>
                                <th scope="col" style="width:40%;">Activity</th>
                                <th scope="col" style="width:5%;">Select</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for activity in tasks %}
                            <tr>
                                <td>{{ forloop.counter }}</td>
                                <td>{{ activity.tran_date }}</td>
                                <td>{{ activity.tran_type }}</td>
                                <td>{{ activity.lawyer.access_code }}</td>
                                <td>{{ activity.task }}</td>

                                <td class="text-center"><a class="btn btn-secondary btn-sm" href="#" title="Modify"><i
                                            class="far fa-hand-pointer"></i></a>
                                </td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
                <div class="tab-pane container fade" id="Duedates">
                    <table class="table-hover table-bordered table-sm small table" id="clientduedatelist">
                        <thead class="table-primary text-center">
                            <tr>
                                <th scope="col" style="width:3%;">#</th>
                                <th scope="col" style="width:10%;">Due Date</th>
                                <th scope="col" style="width:25%;">Matter Title</th>
                                <th scope="col" style="width:10%;">File Number</th>
                                <th scope="col" style="width:10%;">Date Filed</th>
                                <th scope="col" style="width:5%;">Lawyer</th>
                                <th scope="col" style="width:25%;">Particulars</th>
                                <th scope="col" style="width:10%;">Date Complied</th>
                                <th scope="col" style="width:2%;">Select</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for duedate in duedates %}
                            <tr>
                                <td>{{ forloop.counter }}</td>
                                <td>{{ duedate.duedate | date:'m/d/Y' }}</td>
                                <td>{{ duedate.matter.matter_title}}</td>
                                <td>{{ duedate.matter.matterno}}</td>
                                <td>{{ duedate.matter.filing_date | date:'m/d/Y' }}</td>
                                <td>{{ duedate.matter.handling_lawyer.access_code }}</td>
                                <td>{{ duedate.particulars }}</td>
                                <td>{{ duedate.date_complied | date:'m/d/Y' }}</td>
                                <td class="text-center"><a class="btn btn-secondary btn-sm"
                                        href="{% url 'select-matter' duedate.matter.id %}" title="Edit Due Date"><i
                                            class="far fa-hand-pointer"></i></a>
                                </td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
                <div class="tab-pane container fade" id="billings">
                    <table class="table-hover table-bordered table-sm small table" id="clientbillings">
                        <thead class="table-primary text-center">
                            <tr>
                                <th scope="col" style="width:3%;">#</th>
                                <th scope="col" style="width:12%;">Bill Date</th>
                                <th scope="col" style="width:13%;">Bill #</th>
                                <th scope="col" style="width:12%;">PF</th>
                                <th scope="col" style="width:12%;">Filing</th>
                                <th scope="col" style="width:12%;">OPE</th>
                                <th scope="col" style="width:10%;">Rate</th>
                                <th scope="col" style="width:12%;">Bill Amount USD</th>
                                <th scope="col" style="width:12%;">Bill Amount PHP</th>
                                <th scope="col" style="width:2%;">Select</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for AR in accounts_receivables %}
                            <tr>
                                <td>{{ forloop.counter }}</td>
                                <td>{{ AR.bill_date | date:'m/d/Y' }}</td>
                                <td>{{ AR.bill_no}}</td>
                                <td>{{ AR.pf_amount }}</td>
                                <td>{{ AR.filing_amount }}</td>
                                <td>{{ AR.ope_amount }}</td>
                                <td>{{ AR.peso_rate_used }}</td>
                                <td>{{ AR.total_USDamount }}</td>
                                <td>{{ AR.total_PhPamount }}</td>
                                <td class="text-center"><a class="btn btn-secondary btn-sm" href="#"
                                        title="Edit Due Date">
                                        <i class="far fa-hand-pointer"></i></a>
                                </td>

                                </td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
                <div class="tab-pane container fade" id="photoimage">
                    <img src="{{ user.image.URL }}" />
                    <!-- <a href="#"><img class="img-fluid mt-3" src="{{ user.image.URL }}" height="500" width="500" /></a> -->
                </div>


            </div>
        </div>
    </div>
</div>

{% for message in messages %}
{% if message.tags == 'sucess' %}
<script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
<script>
    var m = "{{ message }}"
    swal("perfect !", m, "success")
</script>
{% endif %}
{% endfor %}

{% endblock %}